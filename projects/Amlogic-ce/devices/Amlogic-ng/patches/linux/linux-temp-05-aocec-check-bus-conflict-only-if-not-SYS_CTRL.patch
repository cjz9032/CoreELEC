From d08c6f0281a1c76db9fb67382e94ebf4cee678ee Mon Sep 17 00:00:00 2001
From: Portisch <hugo.portisch@yahoo.de>
Date: Fri, 5 Feb 2021 20:09:48 +0100
Subject: [PATCH 1/3] aocec: check bus conflict only if not SYS_CTRL

---
 drivers/amlogic/cec/hdmi_ao_cec.c | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

diff --git a/drivers/amlogic/cec/hdmi_ao_cec.c b/drivers/amlogic/cec/hdmi_ao_cec.c
index 650b230ea003..b2b58beeec9a 100644
--- a/drivers/amlogic/cec/hdmi_ao_cec.c
+++ b/drivers/amlogic/cec/hdmi_ao_cec.c
@@ -1614,8 +1614,8 @@ int cec_ll_tx(const unsigned char *msg, unsigned char len)
 	 * free time, that means a send is already started by other
 	 * device, we should wait it finished.
 	 */
-	if (check_confilct()) {
-		CEC_ERR("bus confilct too long\n");
+	if (!(cec_dev->hal_flag & (1 << HDMI_OPTION_SYSTEM_CEC_CONTROL)) && check_confilct()) {
+		CEC_ERR("bus conflict too long\n");
 		mutex_unlock(&cec_dev->cec_tx_mutex);
 		return CEC_FAIL_BUSY;
 	}
-- 
2.30.0

